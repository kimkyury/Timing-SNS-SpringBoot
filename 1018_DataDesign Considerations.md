
# 데이터 설계시의 고민

## 1. 타임랩스에 대하여 테이블을 분리해야하는가?
### 문제사항
1. 타임랩스는 진행/완료 상태에 따라 속성이 달리한다 
2. 진행 중인 타임랩스는 마이페이지에서만 조회되며, 완료된 타임랩스는 메인화면의 전체피드로 조회된다
3. 만약 진행/완료 상태에 구분없이 한 테이블에 관리한다면, 전체 데이터를 끌고와 완료된 전체피드만 쿼리해내는 것에 비용이 클 것같다

### 해결방안
- 진행중인 타임랩스는 'Challenges'로, 완료된 타임랩스는 'Feed'로 따로 관리한다면 별도의 쿼리 과정을 줄일 수 있다.



## 2.  해시태그를 어떻게 할 것인가?
### 문제사항
1. 타임랩스는 진행상태와 완료상태에 따라 테이블을 따로 가진다
2. 타임랩스의 최초 생성시에 해시태그가 결정된다
3. 타임랩스는 완료되면 Challenage테이블에서 Feed테이블의 데이터로 이전된다
4. 이때, Challenage테이블의 매핑테이블로 (challenageId와 hashTagId를 FK로 갖고 있었다)있던 태그된 해시태그 정보를, Feed테이블에도 이전시켜야한다

### 선택사항
1. 기존의 태그된 해시태그 테이블의 column으로 challenageId, hashTagId, FeedId를 갖게 만든다
	- 테이블 수를 최소화하여 관리 복잡성을 낮출 수 있음
	- 중복되는 구조와 코드를 줄일 수 있음
	- cahllenageId와 FeedId가 동시에 채워져 있지 않은 경우 예외처리해야함
	- 쿼리의 복잡성이 증가할 수 있음
1. 'Challenge에 태그된 해시태그' 테이블과 'Feed에 태그된 해시태그'를 분리하여 관리한다
	- 각 테이블의 목적이 명확하며, 관계 및 데이터 무결성을 유지하는 데 더 효과적임
	- 쿼리 작성이 단순화되며 각 테이블에 대한 조작(삽입, 삭제, 수정)이 명확해짐
	- 더 많은 테이블을 관리해야하므로 구조 복잡성 증가 가능
	- 코드 또는 쿼리 중복의 가능성 존재

### 해결방안
- 태그된 해시태그를 분리시키기.
- 두 테이블은 서로 다른 생명주기와 목적을 가지기에, 그에 따른 해시태그 매핑도 분리하는 것이 각 엔티티의 독립성과 데이터의 무결성을 유지하는 데 도움될 것으로 기대함
- 또한, 시스템 확장시 각 테이블에 대한 속성이나 규칙이 추가될 경우에도 이 경우가 유연성을 제공할 수 있음
